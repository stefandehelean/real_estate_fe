(this.webpackJsonpreal_estate=this.webpackJsonpreal_estate||[]).push([[0],{222:function(e,t,a){e.exports=a(442)},227:function(e,t,a){},442:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(7),o=a.n(c),i=(a(227),a(22)),l=a(39),u=a(208),s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.type,e},m="USERS_LOGIN_REQUEST",p="USERS_LOGIN_SUCCESS",d="USERS_LOGIN_FAILURE",E="USERS_LOGIN_FB_REQUEST",g="USERS_LOGIN_FB_SUCCESS",f="USERS_LOGIN_FB_FAILURE",h="USERS_LOGOUT",v=JSON.parse(localStorage.getItem("user")),y=v?{loggedIn:!0,user:v}:{};function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return{loggingIn:!0,user:t.user};case p:return{loggedIn:!0,user:t.user};case d:case h:return{};default:return e}}var b={GETALL_REQUEST:"PROPERTIES_GETALL_REQUEST",GETALL_SUCCESS:"PROPERTIES_GETALL_SUCCESS",GETALL_FAILURE:"PROPERTIES_GETALL_FAILURE"};function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b.GETALL_REQUEST:return{loading:!0};case b.GETALL_SUCCESS:return{items:t.properties};case b.GETALL_FAILURE:return{error:t.error};default:return e}}var _="PROPERTIES_GETBYID_REQUEST",T="PROPERTIES_GETBYID_SUCCESS",x="PROPERTIES_GETBYID_FAILURE";function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return{loading:!0};case T:return{item:t.propertyDetails};case x:return{error:t.error};default:return e}}var w=function(){return Object(l.c)({defaultReducer:s,login:S,properties:O,propertyDetails:I})},L=[u.a],j=[];window.__REDUX_DEVTOOLS_EXTENSION__&&j.push(window.__REDUX_DEVTOOLS_EXTENSION__());var N=Object(l.e)(w(),l.d.apply(void 0,[l.a.apply(void 0,L)].concat(j))),C=a(212),G=a(512),R=function(e){var t=e.component,a=Object(C.a)(e,["component"]);return r.a.createElement(G.b,Object.assign({},a,{render:function(e){return localStorage.getItem("user")?r.a.createElement(t,e):r.a.createElement(G.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},U=a(32),A=Object(U.a)(),k=a(62),B=a(104),F=a(112),D={env:"dev",apiUrl:"https://real-estate-app-stefan.herokuapp.com",fbAppId:"333179914323347",fbAppSecret:"4662a1e472586d9c64b2156e82417f34"},P=D,M=a(47),W=a(517),J=a(495),Q=a(213),Y=a(491),q=a(511),z=a(43),X=a(486),V=a(489);function Z(){localStorage.removeItem("user")}function H(e){return e.text().then((function(t){var a=t&&JSON.parse(t);if(!e.ok){500===e.status&&(Z(),window.location.reload(!0));var n=a&&a.message||e.statusText;return Promise.reject(n)}return a}))}var K={login:function(e,t){var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})};return fetch("".concat(P.apiUrl,"/api/user/login"),a).then(H).then((function(e){return localStorage.setItem("user",JSON.stringify(e)),e}))},logout:Z,loginFB:function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:e})};return fetch("".concat(P.apiUrl,"/api/user/loginFB"),t).then(H).then((function(e){return localStorage.setItem("user",JSON.stringify(e)),e}))}};var $={login:function(e,t){return function(a){a({type:m,user:{email:e}}),K.login(e,t).then((function(e){a(function(e){return{type:p,user:e}}(e)),A.push("/")}),(function(e){a(function(e){return{type:d,error:e}}(e.toString())),A.push("/")}))}},logout:function(){return K.logout(),{type:h}},loginFB:function(e){return function(t){t({type:E,user:{code:e}}),K.loginFB(e).then((function(e){t(function(e){return{type:g,user:e}}(e)),A.push("/")}),(function(e){t(function(e){return{type:f,error:e}}(e.toString())),A.push("/")}))}}},ee=Object(X.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",padding:"10px"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));var te=function(){var e=ee(),t=Object(n.useState)({email:"",password:""}),a=Object(F.a)(t,2),c=a[0],o=a[1],l=c.email,u=c.password,s=Object(i.b)(),m=M.stringify({client_id:P.fbAppId,redirect_uri:"http://localhost:3000/facebookauth",scope:["email","user_friends"].join(","),response_type:"code",auth_type:"rerequest",display:"popup"}),p="https://www.facebook.com/v4.0/dialog/oauth?".concat(m);function d(e){var t=e.target,a=t.name,n=t.value;o((function(e){return Object(B.a)({},e,Object(k.a)({},a,n))}))}return Object(n.useEffect)((function(){s($.logout())}),[s]),r.a.createElement(V.a,{component:"main",maxWidth:"xs"},r.a.createElement(Y.a,null),r.a.createElement(Q.a,{variant:"outlined",square:!0,className:e.paper},r.a.createElement(W.a,{className:e.avatar}),r.a.createElement(z.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:e.form,onSubmit:function(e){e.preventDefault(),l&&u&&s($.login(l,u))},noValidate:!0},r.a.createElement(q.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,onChange:d}),r.a.createElement(q.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:d}),r.a.createElement(J.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},"Sign In"),r.a.createElement(J.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",className:e.submit,onClick:function(e){e.preventDefault(),window.location.href=p}},"Login With Facebook"))))};function ae(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.token?{"x-access-token":e.token}:{}}function ne(e){return e.text().then((function(t){var a=t&&JSON.parse(t);if(!e.ok){500===e.status&&(K.logout(),window.location.reload(!0));var n=a&&a.message||e.statusText;return Promise.reject(n)}return a}))}var re={getAll:function(e){var t={method:"GET",headers:ae()},a=e&&Object.keys(e).length>0?"?".concat(M.stringify(e)):"";return fetch("".concat(P.apiUrl,"/api/property").concat(a),t).then(ne)}};var ce={getAll:function(e){return function(t){t({type:b.GETALL_REQUEST}),re.getAll(e).then((function(e){t(function(e){return{type:b.GETALL_SUCCESS,properties:e}}(e))}),(function(e){return t(function(e){return{type:b.GETALL_FAILURE,error:e}}(e.toString()))}))}},getById:function(e){return function(t){t({type:b.GETBYID_REQUEST}),re.getById(e).then((function(e){t(function(e){return{type:b.GETBYID_SUCCESS,properties:e}}(e))}),(function(e){return t(function(e){return{type:b.GETBYID_FAILURE,error:e}}(e.toString()))}))}}},oe=a(496),ie=a(497),le=Object(X.a)((function(e){return{title:{flexGrow:1}}}));var ue=function(){var e=le();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.a,null),r.a.createElement(oe.a,{position:"fixed"},r.a.createElement(ie.a,null,r.a.createElement(z.a,{variant:"h6",className:e.title},"Real estates"),r.a.createElement(J.a,{color:"inherit",onClick:function(e){e.preventDefault(),$.logout(),A.replace("/")}},"Logout"))))},se=a(513),me=a(514),pe=a(498),de=a(510),Ee=a(500),ge=a(499),fe=Object(X.a)((function(e){return{root:{flexGrow:1,"& .MuiTextField-root":{width:"100%"},"& .MuiSelect-root":{marginTop:"17px"},"& .MuiSelect-icon":{top:"calc(50% - 2px)"}},buttons:{display:"flex",justifyContent:"flex-start"},button:{marginTop:e.spacing(1),marginLeft:e.spacing(1)}}}));var he=function(){var e=fe(),t=Object(i.b)(),a=Object(n.useState)({city:"",priceMax:""}),c=Object(F.a)(a,2),o=c[0],l=c[1],u=o.city,s=o.priceMax;function m(e){var t=e.target,a=t.name,n=t.value;l((function(e){return Object(B.a)({},e,Object(k.a)({},a,n))}))}function p(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t(ce.getAll(e?o:{}))}return r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.a,null),r.a.createElement("div",{className:e.root},r.a.createElement(se.a,{className:e.filter},r.a.createElement(me.a,{expandIcon:"+","aria-controls":"panel1a-content",id:"panel1a-header"},r.a.createElement(z.a,null,"Filter Estates")),r.a.createElement(pe.a,null,r.a.createElement(ge.a,{container:!0,spacing:1},r.a.createElement(ge.a,{item:!0,xs:12,sm:2},r.a.createElement(de.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:u,name:"city",size:"small",fullWidth:!0,onChange:m},r.a.createElement(Ee.a,{value:""},r.a.createElement("em",null,"\xa0")),r.a.createElement(Ee.a,{value:"Brasov"},"Brasov"),r.a.createElement(Ee.a,{value:"Bucuresti"},"Bucuresti"),r.a.createElement(Ee.a,{value:"Cluj-Napoca"},"Cluj-Napoca"),r.a.createElement(Ee.a,{value:"Constanta"},"Constanta"),r.a.createElement(Ee.a,{value:"Iasi"},"Iasi"),r.a.createElement(Ee.a,{value:"Timisoara"},"Timisoara"))),r.a.createElement(ge.a,{item:!0,xs:12,sm:2},r.a.createElement(q.a,{type:"number",label:"Max Price",name:"priceMax",value:s,inputProps:{step:1e4},onChange:m})),r.a.createElement(ge.a,{item:!0,xs:12,sm:2},r.a.createElement("div",{className:e.buttons},r.a.createElement(J.a,{type:"button",variant:"contained",color:"primary",onClick:p,className:e.button},"Filter"),r.a.createElement(J.a,{type:"button",variant:"contained",color:"secondary",onClick:function(){l({city:"",priceMax:""}),p(!1)},className:e.button},"Reset"))))))))},ve=a(501),ye=a(502),Se=a(503),be=a(505),Oe=a(504),_e=a(506),Te=Object(X.a)((function(e){return{root:{},title:{flexGrow:1},cardGrid:{paddingTop:e.spacing(8),paddingBottom:e.spacing(8)},cardActionArea:{maxWidth:345},card:{height:"100%",display:"flex",flexDirection:"column"},cardId:{fontSize:"12px"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1}}}));var xe=function(e){var t=e.property,a=Te();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.a,null),r.a.createElement(ge.a,{item:!0,xs:12,sm:6,md:4},r.a.createElement(ve.a,{className:a.cardActionArea,onClick:function(){return function(e){A.push("/details/".concat(e._id))}(t)}},r.a.createElement(ye.a,{className:a.card},r.a.createElement(Se.a,{title:t._id,subheader:"".concat(t.type," (").concat(t.city,")"),titleTypographyProps:{component:"h6",variant:"p"}}),r.a.createElement(Oe.a,{className:a.cardMedia,image:t.images[1],title:t.name}),r.a.createElement(be.a,{className:a.cardContent},r.a.createElement(z.a,{gutterBottom:!0,variant:"h5",component:"h2"},t.name),r.a.createElement(z.a,null,t.description),r.a.createElement(_e.a,null),r.a.createElement(z.a,{align:"right"},t.sold_price," ",t.currency))))))},Ie=Object(X.a)((function(e){return{root:{marginTop:"64px"},title:{flexGrow:1},heroContent:{backgroundColor:e.palette.background.paper,padding:e.spacing(8,0,6)},heroButtons:{marginTop:e.spacing(4)},cardGrid:{paddingTop:e.spacing(8),paddingBottom:e.spacing(8)},cardActionArea:{maxWidth:345},card:{height:"100%",display:"flex",flexDirection:"column"},cardId:{fontSize:"12px"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1},footer:{backgroundColor:e.palette.background.paper,padding:e.spacing(6)}}}));var we=function(){var e=Ie(),t=Object(i.c)((function(e){return e.properties})),a=Object(i.b)();return Object(n.useEffect)((function(){a(ce.getAll())}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.a,null),r.a.createElement("div",{className:e.root},r.a.createElement(ue,null),r.a.createElement("main",null,r.a.createElement(he,null),r.a.createElement(V.a,{className:e.cardGrid,maxWidth:"lg"},r.a.createElement(ge.a,{container:!0,spacing:4},t&&Object.keys(t).length>0&&!t.loading&&t.items.map((function(e){return r.a.createElement(xe,{property:e,key:e._id})})))))))};function Le(e){return e.text().then((function(t){var a=t&&JSON.parse(t);if(!e.ok){500===e.status&&(K.logout(),window.location.reload(!0));var n=a&&a.message||e.statusText;return Promise.reject(n)}return a}))}var je={getById:function(e){var t={method:"GET",headers:ae()};return fetch("".concat(P.apiUrl,"/api/property/").concat(e),t).then(Le)}};var Ne={getById:function(e){return function(t){t({type:_}),je.getById(e).then((function(e){t(function(e){return{type:T,propertyDetails:e}}(e))}),(function(e){return t(function(e){return{type:x,error:e}}(e.toString()))}))}}},Ce=a(508),Ge=a(509),Re=a(494),Ue=a(443),Ae=a(507),ke=a(80),Be=Object(X.a)((function(e){return{root:{marginTop:"64px"},title:{flexGrow:1},cardGrid:{paddingTop:e.spacing(8),paddingBottom:e.spacing(8)},list:{width:"100%",backgroundColor:e.palette.background.paper},gridList:{flexWrap:"nowrap",transform:"translateZ(0)"},paper:{padding:"10px"}}}));var Fe=function(){var e=Be(),t=Object(G.e)().id,a=Object(i.c)((function(e){return e.propertyDetails})),c=Object(i.b)(),o=Object(ke.withScriptjs)(Object(ke.withGoogleMap)((function(e){var t=a.item.location.coordinates;return r.a.createElement(ke.GoogleMap,{defaultZoom:15,defaultCenter:{lat:t[1],lng:t[0]}},r.a.createElement(ke.Marker,{position:{lat:t[1],lng:t[0]}}))})));return Object(n.useEffect)((function(){c(Ne.getById(t))}),[c]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.a,null),r.a.createElement("div",{className:e.root},r.a.createElement(ue,null),r.a.createElement("main",null,r.a.createElement(V.a,{className:e.cardGrid,maxWidth:"lg"},a&&a.item&&r.a.createElement(ge.a,{container:!0,spacing:4},r.a.createElement(ge.a,{item:!0,xs:12,sm:12,md:12},r.a.createElement(Q.a,{variant:"outlined",square:!0,className:e.paper},r.a.createElement(ge.a,{container:!0,spacing:4,justify:"space-between",alignItems:"center",className:e.titleGrid},r.a.createElement(ge.a,{item:!0,xs:12,sm:12,md:6},r.a.createElement(z.a,{component:"h1",variant:"h6"},a.item.name),r.a.createElement(z.a,{component:"h1",variant:"h5"},"".concat(a.item.sold_price," ").concat(a.item.currency))),r.a.createElement(ge.a,{item:!0,xs:12,sm:12,md:1},r.a.createElement(J.a,{type:"button",fullWidth:!0,variant:"contained",color:"default",onClick:function(){A.push("/")},className:e.backButton},"Back"))))),r.a.createElement(ge.a,{item:!0,xs:12,sm:12,md:12},r.a.createElement(Q.a,{variant:"outlined",square:!0,className:e.paper},r.a.createElement(Re.a,{className:e.list},r.a.createElement(Ue.a,null,r.a.createElement(Ae.a,{primary:"ID",secondary:t})),r.a.createElement(Ue.a,null,r.a.createElement(Ae.a,{primary:"Description",secondary:a.item.description})),r.a.createElement(Ue.a,null,r.a.createElement(Ae.a,{primary:"Type",secondary:a.item.type}))))),r.a.createElement(ge.a,{item:!0,xs:12,sm:12,md:12},r.a.createElement(Ce.a,{className:e.gridList,cols:3.5,rows:2},a.item.images.map((function(e,t){return r.a.createElement(Ge.a,{key:t,rows:2},r.a.createElement("img",{src:e}))})))),r.a.createElement(ge.a,{item:!0,xs:12,sm:12,md:12},r.a.createElement(o,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyDYu2zosULWlOYQij74195oaQyhwi3SoMA&v=3.exp&libraries=geometry,drawing,places",loadingElement:r.a.createElement("div",{style:{height:"100%"}}),containerElement:r.a.createElement("div",{style:{height:"400px"}}),mapElement:r.a.createElement("div",{style:{height:"100%"}})})))))))};var De=function(){var e=M.parse(window.location.search),t=Object(i.b)();return e.code&&t($.loginFB(e.code)),r.a.createElement(r.a.Fragment,null)};function Pe(){return r.a.createElement(i.a,{store:N},r.a.createElement(G.c,{history:A},r.a.createElement("div",null,r.a.createElement(G.d,null,r.a.createElement(R,{exact:!0,path:"/",component:we}),r.a.createElement(R,{exact:!0,path:"/details/:id",component:Fe}),r.a.createElement(G.b,{path:"/login"},r.a.createElement(te,null)),r.a.createElement(G.b,{path:"/facebookauth"},r.a.createElement(De,null)),r.a.createElement(G.a,{from:"*",to:"/"})))))}o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Pe,null)),document.getElementById("root"))}},[[222,1,2]]]);
//# sourceMappingURL=main.a289c313.chunk.js.map